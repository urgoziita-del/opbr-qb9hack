// ===============================
// ğŸ”¹ Discord Redirectså—ã‘å–ã‚Šç”¨JS
// ===============================

window.addEventListener("load", () => {
    const hash = window.location.hash;

    if (hash.includes("access_token")) {
        // âœ… èªè¨¼æˆåŠŸæ™‚ã®ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
        const token = hash.split("access_token=")[1].split("&")[0];
        console.log("âœ… èªè¨¼æˆåŠŸ! ãƒˆãƒ¼ã‚¯ãƒ³:", token);

        // ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã—ã¦1ãƒšãƒ¼ã‚¸ç›®ã«æ¸¡ã™
        localStorage.setItem("discord_auth_token", token);

        // æˆåŠŸUI
        document.body.style.background = "#222";
        document.body.style.color = "white";
        document.body.style.fontFamily = "sans-serif";
        document.body.style.textAlign = "center";
        document.body.innerHTML = `
            <h2>âœ… Discordèªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸ</h2>
            <p>å…ƒã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚Šã¾ã™...</p>
        `;

        // 2ç§’å¾Œã«å…ƒã®JSã¸æˆ»ã‚‹
        setTimeout(() => {
            window.location.href = "https://urgoziita-del.github.io/auth.js";
        }, 2000);
    } else {
        // ğŸš« éèªè¨¼ã‚¢ã‚¯ã‚»ã‚¹
        document.body.style.background = "#000";
        document.body.style.color = "red";
        document.body.style.textAlign = "center";
        document.body.style.fontFamily = "sans-serif";
        document.body.innerHTML = `
            <h2>âŒ éèªè¨¼ã‚¢ã‚¯ã‚»ã‚¹</h2>
            <p>ã“ã®ãƒšãƒ¼ã‚¸ã«ã¯ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚</p>
        `;
        setTimeout(() => {
            window.location.href = "https://urgoziita-del.github.io/auth.js";
        }, 3000);
    }
});
